<%- include("../layouts/header.ejs") %>

<div class="container py-5">

    <h1 class="text-danger fw-bold mb-4">Dashboard</h1>

    <% if (typeof message !== 'undefined') { %>
        <h4 class="text-white bg-danger p-2 rounded"><%= message %></h4>
    <% } %>

    <div class="d-flex justify-content-between align-items-center mb-3">
        <a href="/admin/newuser" class="btn btn-danger">+ Add New User</a>
        <a href="/admin/home" class="btn btn-outline-secondary">Go to Home</a>
    </div>

    <div class="table-responsive">
        <table class="table table-dark table-bordered table-hover text-center align-middle">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Mobile</th>
                    <th>Image</th>
                    <th>Verified</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <% if (users.length > 0) { %>
                    <% for (let i = 0; i < users.length; i++) { %>
                        <tr>
                            <td><%= users[i].name %></td>
                            <td><%= users[i].email %></td>
                            <td><%= users[i].mobile %></td>
                            <td>
                                <img src="/userImages/<%= users[i].image %>" width="50" height="50" class="rounded-circle" style="object-fit: cover; border: 2px solid #e94560;">
                            </td>
                            <td>
                                <% if(users[i].is_verified){ %>
                                    <span class="badge bg-success">Yes</span>
                                <% } else { %>
                                    <span class="badge bg-danger">No</span>
                                <% } %>
                            </td>
                            <td>
                                <a href="/admin/edituser?id=<%= users[i]._id %>" class="btn btn-sm btn-warning me-1">Edit</a>
                                <a href="/admin/deleteuser?id=<%= users[i]._id %>" class="btn btn-sm btn-danger">Delete</a>
                            </td>
                        </tr>
                    <% } %>
                <% } else { %>
                    <tr>
                        <td colspan="6" class="text-secondary">Users not found</td>
                    </tr>
                <% } %>
            </tbody>
        </table>
    </div>

</div>

<%- include("../layouts/footer.ejs") %>